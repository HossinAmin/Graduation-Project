(async function(){"use strict";const e=document.createElement("video");e.setAttribute("playsinline",""),e.setAttribute("autoplay",""),e.setAttribute("muted","");const t=Object.fromEntries(["buffer","display"].map(e=>{const t=document.createElement("canvas"),a=t.getContext("2d");return[e,{element:t,context:a}]}));let a=0;function n(a,n){const c=[0,0,a,n],{context:l}=t.buffer;l.clearRect(...c),e.srcObject?l.drawImage(e,...c):"18, 100%, 68%; -10,100%,80%; 5, 90%, 72%; 48, 100%, 75%; 36, 100%, 70%; 20, 90%, 70%".split(";").forEach((e,t)=>{l.fillStyle=`hsl(${e})`,l.fillRect(t*a/6,0,a/6,n)});{const e=.9*a,t=.9*n,c="Hello".length;l.font=`bold ${e}px "Google Sans"`,l.textAlign="center",l.textBaseline="middle";let i=l.measureText("0"),s=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent,o="Hello".reduce((e,t)=>Math.max(e,l.measureText(t).width),0);const r=Math.min(e**2/o,t**2/s/c);l.font=`bold ${r}px ${display_fonts}`,i=l.measureText("0"),s=1.5*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent),l.lineWidth=r/8,l.strokeStyle="black",l.fillStyle="white","Hello".forEach((e,t)=>{let a=[...center];a[1]+=s*(t-c/2+.5),l.strokeText(e,...a),l.fillText(e,...a)})}t.display.context.clearRect(...c),t.display.context.drawImage(t.buffer.element,0,0)}class c extends MediaStream{constructor(c){super(c),e.srcObject=c;const{width:l,height:i}=c.getVideoTracks()[0].getSettings();Object.values(t).forEach(e=>{e.element.width=l,e.element.height=i}),clearInterval(a);a=setInterval(n,1e3/30,l,i);const s=t.display.element.captureStream(30);return s.addEventListener("inactive",()=>{c.getTracks().forEach(e=>e.stop()),t.display.context.clearRect(...fill),e.srcObject=null}),s}}MediaDevices.prototype.old_getUserMedia=MediaDevices.prototype.getUserMedia,MediaDevices.prototype.getUserMedia=(async e=>e&&e.video&&!e.audio?new c(await navigator.mediaDevices.old_getUserMedia(e)):navigator.mediaDevices.old_getUserMedia(e))})()